DROP SEQUENCE PRODUCTOS_SEQ;
DROP  SEQUENCE CLIENTES_SEQ;
DROP SEQUENCE PEDIDOS_SEQ;
DROP SEQUENCE LISTA_PRODUCTOS_SEQ;
DROP SEQUENCE ESTATUS_SEQ;
DROP TABLE LISTA_PRODUCTOS;
DROP TABLE PEDIDOS;
DROP TABLE ESTATUS_PEDIDO;
DROP TABLE CLIENTES;
DROP TABLE PRODUCTOS;









CREATE SEQUENCE PRODUCTOS_SEQ
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;

CREATE SEQUENCE CLIENTES_SEQ
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;

CREATE SEQUENCE PEDIDOS_SEQ
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;

CREATE SEQUENCE LISTA_PRODUCTOS_SEQ
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;

CREATE SEQUENCE ESTATUS_SEQ
START WITH 1
INCREMENT BY 1
NOCACHE
NOCYCLE;



CREATE TABLE CLIENTES (
    ID_CLIENTE NUMBER DEFAULT  CLIENTES_SEQ.NEXTVAL NOT NULL PRIMARY KEY ,
    NOMBRE VARCHAR(100) NOT NULL,
    APELLIDO VARCHAR(100) NOT NULL,
    EMAIL VARCHAR(100) NOT NULL UNIQUE,
    TELEFONO VARCHAR(20) NOT NULL UNIQUE,
    DIRECCION VARCHAR(100)
);



CREATE TABLE PRODUCTOS (
    ID_PRODUCTO NUMBER DEFAULT  PRODUCTOS_SEQ.NEXTVAL NOT NULL PRIMARY KEY ,
    NOMBRE VARCHAR(100) NOT NULL,
    DESCRIPCION VARCHAR(100) NOT NULL,
    PRECIO DECIMAL(10, 2) NOT NULL CHECK (PRECIO >= 0),
    STOCK INT NOT NULL CHECK (STOCK >= 0)
    
);




CREATE TABLE ESTATUS_PEDIDO (
    ID_ESTATUS NUMBER DEFAULT ESTATUS_SEQ.NEXTVAL PRIMARY KEY,
    DESCRIPCION VARCHAR2(200) NOT NULL
);




CREATE TABLE PEDIDOS (
    ID_PEDIDO NUMBER DEFAULT  PEDIDOS_SEQ.NEXTVAL NOT NULL PRIMARY KEY ,
    ID_CLIENTE NUMBER NOT NULL,
    ID_LISTA_PRODUCTOS NUMBER NOT NULL,
    TOTAL DECIMAL(10, 2) NOT NULL,
    FECHA_CREACION DATE NOT NULL,
    ESTATUS NUMBER NOT NULL,
    CONSTRAINT CLI_PED_PK FOREIGN  KEY(ID_CLIENTE) REFERENCES CLIENTES(ID_CLIENTE),
    CONSTRAINT EST_PED_PK FOREIGN  KEY(ESTATUS) REFERENCES ESTATUS_PEDIDO(ID_ESTATUS)
   
);


CREATE TABLE LISTA_PRODUCTOS (
    ID_PEDIDO NUMBER NOT NULL,
    ID_PRODUCTO NUMBER NOT NULL,
    CANTIDAD INT NOT NULL,
    PRECIO DECIMAL(10, 2) NOT NULL,
    PRIMARY KEY (ID_PEDIDO, ID_PRODUCTO),
    FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDOS(ID_PEDIDO),
    FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTOS(ID_PRODUCTO)
);


